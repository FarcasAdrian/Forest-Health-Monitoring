<app-page-title [title]="'Report a issue'"></app-page-title>

<div class="container mt-5 mb-4">
    <div class="d-flex justify-content-center">
        <app-alert></app-alert>
    </div>

    <div class="card">
        <div class="card-header">
            <p class="font-weight-bold line-height">Issue Report</p>
            <p class="line-height">Used to report a new issue what appeared at some forest.</p>
        </div>
        <div class="card-body">
            <mat-card>
                <form>
                    <!-- Select forest field -->
                    <mat-form-field class="col-md-12 mt-5">
                        <mat-label>Select Forest</mat-label>
                        <mat-select [formControl]="forestControl" required>
                            <mat-option>--</mat-option>
                            <mat-option *ngFor="let forest of forests" [value]="forest">
                                {{forest}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="forestControl.hasError('required')">You must to choose a forest!</mat-error>
                    </mat-form-field>

                    <!-- Select forest problem field -->
                    <mat-form-field class="col-md-12 mt-5">
                        <mat-label>Select Problem</mat-label>
                        <mat-select [formControl]="forestProblemControl" required>
                            <mat-option>--</mat-option>
                            <mat-option *ngFor="let problem of forestProblems" [value]="problem.problem_type">
                                {{problem.problem_type}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="forestControl.hasError('required')">You must to choose a problem!</mat-error>
                    </mat-form-field>

                    <!-- Issue description field -->
                    <div class="form-group mt-5">
                        <label for="description">Issue Description:</label>
                        <textarea class="form-control" id="description" rows="6" [formControl]="issueDescriptionControl"
                            placeholder="A good description will help us to detect and solve the problem faster.">
                        </textarea>
                        <mat-error *ngIf="issueDescriptionControl.hasError('required')">You must to describe the issue.
                        </mat-error>
                    </div>

                    <!-- Upload image field (not required) -->
                    <mat-card class="mt-5">
                        <p class="font-weight-bold">Optional Field</p>
                        <p class="line-height">If you have a image, upload it. Will help us to find the location problem
                            faster.</p>
                        <hr class="my-4">
                        <input #imageInput type="file" accept="image/*" (change)="uploadImage($event)">
                    </mat-card>
                </form>
            </mat-card>

            <button mat-stroked-button (click)="onSubmit()" matTooltip="submit" class="btn btn-primary btn-block mt-4">
                Submit
            </button>
        </div>
    </div>
</div>